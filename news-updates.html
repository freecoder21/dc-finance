<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>News & Updates - DCM Financing</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/responsive.css">
    <link href="https://fonts.googleapis.com/css2?family=Karla:wght@400;500;700&family=Rubik:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- Header -->
    <header class="site-header">
        <div class="container">
            <div class="header-inner">
                <div class="logo">
                    <a href="index.html">
                        <img src="assets/dcm_logo.png" alt="DCM Financing">
                    </a>
                </div>
                <nav class="main-nav">
                    <ul>
                        <li><a href="index.html">Home</a></li>
                        <li><a href="about.html">About</a></li>
                        <li><a href="news-updates.html" class="active">News & Updates</a></li>
                        <li><a href="blog.html">Blog</a></li>
                        <li><a href="index.html#contact" class="btn-primary">Get in Touch</a></li>

                    </ul>
                </nav>
                <div class="mobile-menu-toggle">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </div>
        </div>
    </header>

    <!-- Page Header -->
    <section class="page-header" id="page-header">
        <!-- Content will be populated by JavaScript -->
    </section>

    <!-- News & Updates Content -->
    <section class="news-page">
        <div class="container">
            <!-- News Filters -->
            <div class="news-filters" id="news-filters">
                <!-- Filters will be populated by JavaScript -->
            </div>

            <!-- News Grid -->
            <div class="news-grid" id="news-grid">
                <!-- News items will be populated by JavaScript -->
            </div>

            <!-- Load More Button -->
            <div class="section-footer">
                <button class="btn-primary" id="load-more">Load More Updates</button>
            </div>
        </div>
    </section>

    <!-- Newsletter Section -->
    <section class="newsletter-section" id="newsletter-section">
        <!-- Newsletter content will be populated by JavaScript -->
    </section>

    <!-- Footer -->
    <footer class="site-footer" id="site-footer">
        <!-- Footer content will be populated by JavaScript -->
    </footer>

    <script src="js/script.js"></script>
    <script>
        // Fetch JSON data and populate the page
        document.addEventListener('DOMContentLoaded', function() {
            fetch('content/pages/news-updates.json')
                .then(response => response.json())
                .then(data => {
                    // Populate Page Header
                    const pageHeader = document.getElementById('page-header');
                    pageHeader.innerHTML = `
                        <div class="container">
                            <h1>${data.page_header.title}</h1>
                            <p>${data.page_header.description}</p>
                        </div>
                    `;

                    // Populate News Filters
                    const newsFilters = document.getElementById('news-filters');
                    newsFilters.innerHTML = data.news_filters.map((filter, index) => `
                        <button class="filter-btn ${index === 0 ? 'active' : ''}" data-filter="${filter.filter}">${filter.label}</button>
                    `).join('');

                    // Populate News Grid
                    const newsGrid = document.getElementById('news-grid');
                    newsGrid.innerHTML = data.news_items.map(item => `
                        <div class="news-card" data-category="${item.category}">
                            <div class="news-image">
                                <img src="${item.image}" alt="${item.alt}">
                            </div>
                            <div class="news-content">
                                <span class="news-category">${getCategoryLabel(item.category)}</span>
                                <p class="news-date">${item.date}</p>
                                <h3>${item.title}</h3>
                                <p>${item.description}</p>
                                 <a href="${item.read_more_link}" class="read-more">Read short Full Story <i class="fas fa-arrow-right"></i></a>
                            </div>
                        </div>
                    `).join('');

                    // Populate Newsletter Section
                    const newsletterSection = document.getElementById('newsletter-section');
                    newsletterSection.innerHTML = `
                        <div class="container">
                            <div class="newsletter-content">
                                <h2>${data.newsletter.title}</h2>
                                <p>${data.newsletter.description}</p>
                                <form class="newsletter-form">
                                    <input type="email" placeholder="Your email address" required>
                                    <button type="submit" class="btn-primary">Subscribe</button>
                                </form>
                            </div>
                        </div>
                    `;

                    // Populate Footer Section
                    const footerSection = document.getElementById('site-footer');
                    footerSection.innerHTML = `
                        <div class="container">
                            <div class="footer-content">
                                <div class="footer-section">
                                    <div class="footer-logo">
                                        <img src="assets/dcm_logo.png" alt="DCM Financing">
                                    </div>
                                    <p>${data.footer.description}</p>
                                    <div class="social-links">
                                        ${data.footer.social_links.map(social => `
                                            <a href="${social.url}"><i class="${social.icon}"></i></a>
                                        `).join('')}
                                    </div>
                                </div>
                                <div class="footer-section">
                                    <h3>Quick Links</h3>
                                    <ul>
                                        ${data.footer.quick_links.map(link => `
                                            <li><a href="${link.url}">${link.label}</a></li>
                                        `).join('')}
                                    </ul>
                                </div>
                                <div class="footer-section">
                                    <h3>Services</h3>
                                    <ul>
                                        ${data.footer.service_links.map(service => `
                                            <li><a href="${service.url}">${service.label}</a></li>
                                        `).join('')}
                                    </ul>
                                </div>
                                <div class="footer-section">
                                    <h3>Contact Us</h3>
                                    <ul class="contact-info">
                                        <li><i class="fas fa-map-marker-alt"></i> ${data.footer.address}</li>
                                        <li><i class="fas fa-phone-alt"></i> ${data.footer.phone}</li>
                                        <li><i class="fas fa-envelope"></i> ${data.footer.email}</li>
                                    </ul>
                                </div>
                            </div>
                            <div class="footer-bottom">
                                <p>${data.footer.copyright}</p>
                            </div>
                        </div>
                    `;

                    // Initialize news filtering functionality
                    initializeNewsFiltering();
                    initializeLoadMore();
                })
                .catch(error => {
                    console.error('Error fetching JSON data:', error);
                });
        });

        function getCategoryLabel(category) {
            const categoryLabels = {
                'transactions': 'Recent Transaction',
                'industry': 'Industry News',
                'company': 'Company News'
            };
            return categoryLabels[category] || 'News';
        }

        function initializeNewsFiltering() {
            const filterButtons = document.querySelectorAll('.filter-btn');
            const newsCards = document.querySelectorAll('.news-card');
            
            filterButtons.forEach(button => {
                button.addEventListener('click', function() {
                    // Remove active class from all buttons
                    filterButtons.forEach(btn => btn.classList.remove('active'));
                    
                    // Add active class to clicked button
                    this.classList.add('active');
                    
                    const filterValue = this.getAttribute('data-filter');
                    
                    // Show/hide news cards based on filter
                    newsCards.forEach(card => {
                        if (filterValue === 'all' || card.getAttribute('data-category') === filterValue) {
                            card.style.display = 'block';
                        } else {
                            card.style.display = 'none';
                        }
                    });
                });
            });
        }

        function initializeLoadMore() {
            const loadMoreBtn = document.getElementById('load-more');
            
            loadMoreBtn.addEventListener('click', function() {
                // In a real implementation, this would load more content from a server
                // For this example, we'll just show an alert
                alert('Loading more updates...');
                // In production, you would make an AJAX request here to fetch more content
            });
        }
    </script>
</body>
</html>